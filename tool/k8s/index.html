<!DOCTYPE HTML>
<html>
<head>
  <meta charset="utf-8">
  
  <title>k8s总结 | 晓月刀的博客</title>
  <meta name="author" content="Denley Hsiao">
  
  <meta name="description" content="晓月刀的博客">
  
  
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

  <meta property="og:title" content="k8s总结"/>
  <meta property="og:site_name" content="晓月刀的博客"/>

  
    <meta property="og:image" content=""/>
  

  <link rel="alternate" href="/atom.xml" title="晓月刀的博客" type="application/atom+xml">
  <link rel="stylesheet" href="/css/style.css" media="screen" type="text/css">
  <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

  <!-- favicon -->
  <link rel="icon" type="image/x-icon" href="/favicon.ico">
  <!-- Font-Awesome -->
  <link rel="stylesheet" href="/font-awesome/css/font-awesome.min.css">

<meta name="generator" content="Hexo 4.2.1"></head>

<body>
  <header id="header"><div class= "header-content inner">
	<div class = "alignleft col-one">
		
			<div class='avatar'>
				<img src = "/assets/images/avator.jpeg">
              </div>
		
		<div class="header-div">
		    <h1><a href="/">晓月刀的博客</a></h1>
		    <h2><a href="/">多动手、勤思考</a></h2>
		</div>
	</div>
	<div class = "alignright col-two">
		
	</div>
	<div class="clearfix"></div>
</div>

<div class= "header-nav">
	<div class='header-nav-content inner'>
		<div id="main-nav" class="alignleft">
		    		
		    		  <a href="/"><i class="fa fa-home"></i>首页</a>
		    		
		    		  <a href="/archives"><i class="fa fa-archive"></i>归档</a>
		    		
		    		  <a href="https://kbase.justtodo.com/" target="_blank" rel="noopener"><i class="fa fa-book"></i>电子书</a>
		    		
		</div>
		<div id="sub-nav" class="alignright">
		    
		      <a href="/about"><i class="fa fa-user"></i>关于我</a>
		    
		</div>
	</div>
	<div class="clearfix"></div>
</div>
</header>
    <div id="content" class="inner">
      <div id="main-col" class="alignleft"><div id="wrapper"><article class="post">
  
  <div class="post-content">
    <header>
        <div class="icon"></div>
        
        <time datetime="2018-05-27T01:58:00.000Z"><a href="/tool/k8s/">2018-05-27</a></time>
        
  
    <h1 class="title">k8s总结</h1>
  

    </header>

    <div class="entry">
      
        
    <div id="toc">
        <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#学习方法"><span class="toc-text">学习方法</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#docker"><span class="toc-text">docker</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#kubernetes"><span class="toc-text">kubernetes</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#他人建议"><span class="toc-text">他人建议</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#minikube安装"><span class="toc-text">minikube安装</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#环境搭建"><span class="toc-text">环境搭建</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#master"><span class="toc-text">master</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#node"><span class="toc-text">node</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#参考"><span class="toc-text">参考</span></a></li></ol>
    </div>

        <p>k8s是基于docker下的DevOps工具</p>
<a id="more"></a>

<h1 id="学习方法"><a href="#学习方法" class="headerlink" title="学习方法"></a>学习方法</h1><h2 id="docker"><a href="#docker" class="headerlink" title="docker"></a>docker</h2><p>首先从其基础docker学习开始</p>
<ul>
<li>从简单开始，边ß看边动手</li>
<li>难点在网络、端口的映射，容器卷的使用</li>
</ul>
<h2 id="kubernetes"><a href="#kubernetes" class="headerlink" title="kubernetes"></a>kubernetes</h2><ul>
<li>坚持啃官网，特别留意是否有没有<a href="https://k8smeetup.github.io/" target="_blank" rel="noopener">中文官网</a></li>
<li>先简要了解:  <a href="https://www.bilibili.com/video/av10087636/" target="_blank" rel="noopener">写给孩子看的Kubernetes 动画指南</a>， <a href="https://jimmysong.io/kubernetes-handbook/guide/docker-cli-to-kubectl.html" target="_blank" rel="noopener">docker用户过渡到kubectl命令行指南</a></li>
<li><a href="http://www.cnblogs.com/CloudMan6/tag/Kubernetes/" target="_blank" rel="noopener">每天5分钟玩转 Kubernetes</a>，微信公众号同步：CloudMan</li>
<li>单机版minikube开始，安装前要翻墙，包括终端下的，也是边看边动手</li>
<li>集群学习前先不要自己搭建，太难搭成功，先试验 <a href="https://labs.play-with-k8s.com/" target="_blank" rel="noopener">在线玩转k8s</a></li>
<li>上一步骤的缺点是没有外网IP，此部分可以在GKE上试验</li>
<li>啃精典：Kubernetes权威指南：从Docker到Kubernetes实践全接触（第2版)/ <a href="https://www.ibm.com/developerworks/community/wikis/home?lang=en#!/wiki/W30b0c771924e_49d2_b3b7_88a2a2bc2e43/page/Kubernetes%E7%B3%BB%E5%88%97" target="_blank" rel="noopener">IBM在线微课堂: Kubernetes系列</a></li>
<li>自己实战，先搭建集群的实验环境，再从简单的项目迁移开始</li>
</ul>
<h2 id="他人建议"><a href="#他人建议" class="headerlink" title="他人建议"></a>他人建议</h2><ul>
<li><p>多读、多看、多听。<br>Retriever Communications 首席技术官 Nic Grange 推荐 Kelsey Hightower 提供的学习资料；此外，Hightower、Beda、Brendan Burns（Kubernetes 创始人之一）联合创作的《Kubernetes：Upand Running》也值得一看；另外，Red Hat 的《Kubernetes Guide》 ，包含了 Kubenetes 词汇表以及 Kubernetes 如何融入企业 IT 架构，推荐阅读。</p>
</li>
<li><p>有计划地理解概念性知识。<br>Pepperdata 高级架构师 Kimoon Kim 表示：“Kubernetes 有许多不同的结构，新用户很容易迷路。因此，要先从 Kubernetes Pod 开始，再结合 Kubernetes 集群进行学习。CYBRIC 首席技术官兼联合创始人 Mike Kail 表示：“开始使用像 Kubernetes 这样的新兴技术的最好方法是构建框架，然后以合乎逻辑的方式进行下去，而不是一口气吃成胖子。 Kail 将其分解为：Kubernetes 构建 Blocks（如 Pod），服务（如 ClusterIP），网络，数据卷管理以及服务发现/负载均衡。</p>
</li>
<li><p>用 Kubernetes “试驾”。<br>一旦你对 Kubernetes 核心概念有了较好的理解，那么，你就可以从一个简单的应用程序部署开始了解集群。Nic Grange 认为：“让 Kubernetes 自己启动和运行是令用户和团队感到最具挑战性的部分。通过类似 Minikube 这样的开源项目，首先学习如何托管 Kubernetes 部署和管理应用程序，然后回过头去学习如何构建和管理自己的集群受益会更大。</p>
</li>
<li><p>计划使用 Kubernetes 非关键负载。<br>一旦你接受了这些概念，你就可以开始计划如何使用（Kubernetes）非关键的工作负载了。因为在部署更重要的工作负载时，这个过程能帮助你学习、犯错、获得自信。一个成功的学习策略需要反复试验：通过预判早期的失误，即可限制它们对底层应用程序的影响。这点在“测试和学习模式”发展到“管理生产中的容器”模式的过程中，以及当您用编排平台（如 OpenShift）以可扩展的方式管理容器时，显得尤为重要。</p>
</li>
<li><p>从概念学习向深入学习递进，确保学习进度呈现曲线而非直线。<br>部分实践学习应该在日常使用中边练边学，然后逐步掌握概念，深入了解该平台。一旦你建立了初步的应用程序，并逐渐适应，就可以开始深入研究 Kubernetes 的所有“魔法”了。 例如它是如何导流到服务的？当 Pod 移动时，它是如何使用并管理 PV 的？以及为了保护 Pods，哪些需求选项是可用的？这将对您有效地使用托管的 Kubernetes，甚至建立自己的私有 Kubernetes 集群非常有利。</p>
</li>
</ul>
<h1 id="minikube安装"><a href="#minikube安装" class="headerlink" title="minikube安装"></a>minikube安装</h1><p>Mac air下</p>
<ol>
<li>安装virtualbox</li>
<li>kubectl 安装: <code>curl -Lo kubectl https://storage.googleapis.com/kubernetes-release/release/$(curl -s https://storage.googleapis.com/kubernetes-release/release/stable.txt)/bin/darwin/amd64/kubectl &amp;&amp; chmod +x kubectl &amp;&amp; sudo mv kubectl /usr/local/bin/</code></li>
<li>minikube安装：<code>curl -Lo minikube http://kubernetes.oss-cn-hangzhou.aliyuncs.com/minikube/releases/v0.24.1/minikube-darwin-amd64 &amp;&amp; chmod +x minikube &amp;&amp; sudo mv minikube /usr/local/bin/</code></li>
<li>启动：<code>minikube start --registry-mirror=https://registry.docker-cn.com</code></li>
<li>运行: <code>minikube dashboard</code></li>
</ol>
<h1 id="环境搭建"><a href="#环境搭建" class="headerlink" title="环境搭建"></a>环境搭建</h1><p>master和node节点都需要的操作，详见: <a href="http://www.cnblogs.com/CloudMan6/p/8269620.html" target="_blank" rel="noopener">部署 k8s Cluster</a></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">apt-get update &amp;&amp; apt-get install -y apt-transport-https</span><br><span class="line">curl -s https://packages.cloud.google.com/apt/doc/apt-key.gpg | apt-key add -</span><br><span class="line">cat &lt;&lt;EOF &gt;/etc/apt/sources.list.d/kubernetes.list</span><br><span class="line">deb http://apt.kubernetes.io/ kubernetes-xenial main</span><br><span class="line">EOF</span><br><span class="line">apt-get update</span><br><span class="line">apt-get install -y kubelet kubeadm kubectl</span><br></pre></td></tr></table></figure>

<h2 id="master"><a href="#master" class="headerlink" title="master"></a>master</h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment"># 一定要记下输出内容，替换后续的部分操作</span></span><br><span class="line">kubeadm init --apiserver-advertise-address $(hostname -i) --pod-network-cidr=10.244.0.0/16</span><br><span class="line"></span><br><span class="line"><span class="comment"># 非root用户下</span></span><br><span class="line">mkdir -p <span class="variable">$HOME</span>/.kube</span><br><span class="line">sudo cp -i /etc/kubernetes/admin.conf <span class="variable">$HOME</span>/.kube/config</span><br><span class="line">sudo chown $(id -u):$(id -g) <span class="variable">$HOME</span>/.kube/config</span><br><span class="line"></span><br><span class="line">kubectl apply -f https://raw.githubusercontent.com/coreos/flannel/master/Documentation/kube-flannel.yml</span><br></pre></td></tr></table></figure>

<h2 id="node"><a href="#node" class="headerlink" title="node"></a>node</h2><p><code>kubeadm join 10.128.0.2:6443 --token ldoxl7.bsfdzfyfunvd0v4q --discovery-token-ca-cert-hash sha256:b846e9c7acf4d83d18850623e0186f8ee97d4f0c483af19410a1cea427872228</code></p>
<h1 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h1><ul>
<li><a href="https://ehlxr.me/2018/01/12/kubernetes-minikube-installation/" target="_blank" rel="noopener">Kubernetes 学习笔记之 MiniKube 安装</a></li>
<li><a href="https://www.jianshu.com/p/a42eeb66a19c" target="_blank" rel="noopener">mac安装kubernetes并运行echoserver</a></li>
<li><a href="https://github.com/IBM/cloud-journeys/issues/1" target="_blank" rel="noopener">Standardized CI System Blog</a></li>
<li><a href="https://github.com/johnnian/Blog/issues/32" target="_blank" rel="noopener">使用Minikube搭建Nginx集群</a></li>
<li><a href="http://blog.csdn.net/yan234280533/article/details/75136630" target="_blank" rel="noopener">Ubuntu 16.04下kubeadm安装Kubernetes</a></li>
<li><a href="http://blog.csdn.net/russle/article/details/78841937" target="_blank" rel="noopener">Kubernetes1.9 在ubuntu16.4 安装</a></li>
<li><a href="http://blog.gezhiqiang.com/2017/08/04/minikube/" target="_blank" rel="noopener">利用Minikube来部署一个nodejs应用</a></li>
<li><a href="http://dockone.io/article/2523" target="_blank" rel="noopener">如何开启kubernetes之旅</a></li>
<li>从<a href="https://github.com/IBM/Kubernetes-container-service-GitLab-sample" target="_blank" rel="noopener">GitLab-sample</a>中学习如何让gitlab上k8s</li>
<li><a href="http://v.youku.com/v_show/id_XMzE4NzU1OTA3Ng==.html" target="_blank" rel="noopener">k8s的存储管理</a>: 看完成视频，再重看实践示例</li>
<li><a href="https://github.com/IBM/Kubernetes-container-service-GitLab-sample/blob/master/README-cn.md" target="_blank" rel="noopener">gitlab在minikube中的实践</a></li>
</ul>

      
    </div>
    <footer>
      
        
  
  <div class="categories">
    <a href="/categories/tool/">工具</a>, <a href="/categories/tool/Docker/">Docker</a>
  </div>

        
        
  <div class="bdsharebuttonbox"><a href="#" class="bds_more" data-cmd="more"></a><a title="分享到QQ空间" href="#" class="bds_qzone" data-cmd="qzone"></a><a title="分享到新浪微博" href="#" class="bds_tsina" data-cmd="tsina"></a><a title="分享到腾讯微博" href="#" class="bds_tqq" data-cmd="tqq"></a><a title="分享到人人网" href="#" class="bds_renren" data-cmd="renren"></a><a title="分享到微信" href="#" class="bds_weixin" data-cmd="weixin"></a></div>
  <script>window._bd_share_config={"common":{"bdSnsKey":{},"bdText":"","bdMini":"2","bdMiniList":false,"bdPic":"","bdStyle":"1","bdSize":"16"},"share":{},"image":{"viewList":["qzone","tsina","tqq","renren","weixin"],"viewText":"分享到：","viewSize":"16"},"selectShare":{"bdContainerClass":null,"bdSelectMiniList":["qzone","tsina","tqq","renren","weixin"]}};with(document)0[(getElementsByTagName('head')[0]||body).appendChild(createElement('script')).src='http://bdimg.share.baidu.com/static/api/js/share.js?v=89860593.js?cdnversion='+~(-new Date()/36e5)];</script>

      
      <div class="clearfix"></div>
    </footer>
  </div>
</article>
<!-- 返回顶部 -->
<div id="toTop">
	<a href="#">▲</a>
	<a href="#footer">▼</a>
</div></div></div>
      <aside id="sidebar" class="alignright">
        
           <div class="search">
  <form action="/search/index.html" method="get" accept-charset="utf-8">
<!--     <input type="search" name="wd"results="0" placeholder="搜索">
    <input type="hidden" name="wd" value="site:blog.justtodo.com"> -->
     <input type="text" id="search" class="st-default-search-input" placeholder="搜索" style="height: 100%" />
  </form>
</div> 
        
          
<div class="widget tag">
  <h3 class="title" id="categories">分类</h3>
     <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/coder/">代码分析师</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/tool/">工具</a><span class="category-list-count">10</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/tool/Docker/">Docker</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/tool/Git/">Git</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/tool/Markdown/">Markdown</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/tool/Vagrant/">Vagrant</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/tech/">技术</a><span class="category-list-count">16</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/tech/AI/">AI</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/tech/C/">C++</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/tech/Rails/">Rails</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/tech/Ruby/">Ruby</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/tech/%E8%BD%AF%E4%BB%B6%E5%B7%A5%E7%A8%8B/">软件工程</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/say/">晓月刀说</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/say/%E6%BA%90%E7%A0%81/">源码</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/say/%E9%80%BB%E8%BE%91/">逻辑</a><span class="category-list-count">1</span></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/misc/">杂项</a><span class="category-list-count">2</span></li></ul> 
</div>
 

        
          
  <div class="widget tag">
    <h3 class="title">友情链接</h3>
      <ul class="entry">
        
          <li class='link'><a href='http://xiaoyun.farbox.com' target="_blank" rel="noopener">晓晓博客</a></li>
        
          <li class='link'><a href='http://www.ituring.com.cn/users/136808' target="_blank" rel="noopener">图灵社区</a></li>
        
      </ul>
  </div>


        
          
<div class="widget tagcloud">
  <h3 class="title">标签云</h3>
  <div class="entry">
    <a href="/tags/Book/" style="font-size: 10px;">Book</a> <a href="/tags/C/" style="font-size: 20px;">C++</a> <a href="/tags/CI/" style="font-size: 15px;">CI</a> <a href="/tags/Database/" style="font-size: 15px;">Database</a> <a href="/tags/Nginx/" style="font-size: 10px;">Nginx</a> <a href="/tags/Objective-C/" style="font-size: 10px;">Objective-C</a> <a href="/tags/Ruby/" style="font-size: 10px;">Ruby</a> <a href="/tags/Third-Party/" style="font-size: 20px;">Third-Party</a> <a href="/tags/Ubuntu/" style="font-size: 10px;">Ubuntu</a> <a href="/tags/WeChat/" style="font-size: 10px;">WeChat</a>
  </div>
</div>

        
          
  <div class="widget tag">
    <h3 class="title">归档</h3>
	<ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2018/">公元 2018 年</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/">公元 2017 年</a><span class="archive-list-count">20</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/">公元 2016 年</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/">公元 2015 年</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2011/">公元 2011 年</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2010/">公元 2010 年</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2009/">公元 2009 年</a><span class="archive-list-count">4</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2008/">公元 2008 年</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2007/">公元 2007 年</a><span class="archive-list-count">1</span></li></ul>
  </div>

        
      </aside>
      <div class="clearfix"></div>
    </div>
  <footer id="footer"><div class="footer-content inner">
  <div class="alignleft">
  
    &copy; 2020 Denley Hsiao
    
  </div>
  <div class="alignright">
    Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>, Theme
    <a href="https://github.com/pengloo53/Hexo-theme-light_cn" target="_blank" rel="noopener">light_cn</a>
  </div>

  <div>
    Hosted by <a href="https://pages.coding.me" target="_blank" rel="noopener" style="font-weight: bold">Coding Pages</a>
  </div>
  
  <div class="clearfix"></div>
</div></footer>
  <script src="/js/jquery.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>

<!-- calendar widget -->


<!-- 百度统计 -->

	<script>
	var _hmt = _hmt || [];
	(function() {
	  var hm = document.createElement("script");
	  hm.src = "//hm.baidu.com/hm.js?9acf0cedd48dc53be256ede5a98c2aaa";
	  var s = document.getElementsByTagName("script")[0]; 
	  s.parentNode.insertBefore(hm, s);
	})();
	</script>


<!-- fancybox -->

<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
  $('.fancybox').fancybox();
})(jQuery);
</script>


</body>
</html>